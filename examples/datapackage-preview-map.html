<html>

<head>
    <meta charset="utf-8" />
</head>

<body>
    <script>
        (function ($, Drupal) {
            window.Drupal.behaviors.mapComponentIFrameConnector = {
                attach: function (context, drupalSettings) {
                    // Using once() to apply the mapComponentIFrameConnector effect when you want to run just one function.
                    $(window, context).once('mapComponentIFrameConnector').each(function () {

                        const mapType = 'DataPackagePreviewMap';
                        const grouping_tag = 'taxonomy_term--eu_gl';
                        const iFrameMapComponent = document.getElementById('map-component');

                        if (undefined !== drupalSettings && undefined !== drupalSettings.csisHelpers && undefined !== drupalSettings.csisHelpers.initMapComponent) {
                            drupalSettings.csisHelpers.initMapComponent(mapType, grouping_tag, iFrameMapComponent);
                            return;
                        } else {
                            console.error('no global drupalSettings object found, probably not connected to Drupal!');
                        }
                    });
                }
            };

        })(jQuery, Drupal);
        // the awkward expression above could have been written as `function whatever($, Drupal); whatever(jQuery, Drupal);`
        // But hey, why write readable and code when you can save some bytes?!  
    </script>

    <iframe name="map-component" id="map-component"
        src="https://csis.myclimateservice.eu/apps/map-component/build/loader.html" style="width:100%;height:500px;">
    </iframe>
</body>

</html>