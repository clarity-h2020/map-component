<html>

<body>
    <!-- Generic Preview Map for Studies-->
    <iframe name="map-component" id="map-component" src="https://csis.myclimateservice.eu/apps/map-component/build/CharacteriseHazardMap/"
        style="width:100%;height:500px;border:1px solid">
    </iframe>

    <script>
        var iFrameMapComponent = document.getElementById('map-component');

        try {
            // this is just unbelievable: if drupalSettings is not defined, this throws 'Uncaught ReferenceError: drupalSettings is not defined' in Chrome! WTF!!!!!!
            if (undefined !== drupalSettings && undefined !== drupalSettings.csisHelpers && undefined !== drupalSettings.csisHelpers.entityinfo) {
                var mapComponentUrl = `https://csis.myclimateservice.eu/apps/map-component/build/CharacteriseHazardMap/?host=${window.location.host}&study_uuid=${drupalSettings.csisHelpers.entityinfo.study_uuid}&study_area=${drupalSettings.csisHelpers.entityinfo.study_area}&study_datapackage_uuid=${drupalSettings.csisHelpers.entityinfo.study_datapackage_uuid}&study_emikat_id=${drupalSettings.csisHelpers.entityinfo.study_emikat_id}&grouping_tag=taxonomy_term--eu_gl`;

                console.debug(`initilizing iFrame with ${mapComponentUrl}`);
                iFrameMapComponent.setAttribute('src', mapComponentUrl);
            } else {
                console.error('no global csisHelpers object found, probably not connected to Drupal!')
            }
        }
        catch (stupidError) {
            console.error('no global drupalSettings object found, probably not connected to Drupal!');
        }
    </script>
</body>

"eea_city_field": undefined,
"host": "https://csis.myclimateservice.eu",
"resource_uuid": undefined,
"step": undefined,
"step_uuid": undefined,
"study": undefined,
"study_area": undefined,
"study_datapackage_uuid": undefined,
"study_emikat_id": undefined,
"study_uuid": undefined,
"write_permissions": undefined
</html>