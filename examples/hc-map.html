<html>

<body>
    <iframe name="map-component" id="map-component" src="https://csis.myclimateservice.eu/apps/map-component/build/CharacteriseHazardMap/"
        style="width:100%;height:500px;border:1px solid">
    </iframe>

    <script>
        var iFrameMapComponent = document.getElementById('map-component');

        try {
            // this is just unbelievable: if drupalSettings is not defined, this throws 'Uncaught ReferenceError: drupalSettings is not defined' in Chrome! WTF!!!!!!
            if (undefined !== drupalSettings && undefined !== drupalSettings.csisHelpers && undefined !== drupalSettings.csisHelpers.entityinfo) {
                var mapComponentUrl = `https://csis.myclimateservice.eu/apps/map-component/build/CharacteriseHazardMap/?host=${window.location.host}&study_uuid=${drupalSettings.csisHelpers.entityinfo.study_uuid}`;
                console.debug(`initilizing iFrame with ${mapComponentUrl}`);
                iFrameMapComponent.setAttribute('src', mapComponentUrl);
            } else {
                console.error('no global csisHelpers object found, probably not connected to Drupal!')
            }
        }
        catch (stupidError) {
            console.error('no global drupalSettings object found, probably not connected to Drupal!');
        }
    </script>
</body>

</html>